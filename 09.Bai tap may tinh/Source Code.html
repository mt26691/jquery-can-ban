<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Bài tập máy tính</title>
    <style>
        .btn {
            width: 50px;
            height: 50px;
            float: left;
        }
        
        .answer-holder {
            width: 98%;
            height: 35px;
        }
        
        .red-text {
            color: red;
        }
        
        .form-holder {
            width: 200px;
            margin: auto;
        }
        
        form,
        input,
        button {
            margin: 0px;
        }
    </style>

</head>

<body>
    <p>Bài tập này có sự tham khảo từ
        <a href="https://gist.github.com/johndavedecano/3149185">https://gist.github.com/johndavedecano/3149185</a>
    </p>
    <form class="form-holder">
        <!--trường ẩn lưu số và phép tính đã bấm-->
        <input type="hidden" id="operation" value="" />
        <!--thẻ input chứa giá trị được nhập-->
        <input type="text" id="answer" value="" class="answer-holder" disabled="disabled" />
        <input type="button" value="+" id="plus" class="btn" />
        <input type="button" value="-" id="subtract" class="btn" />
        <input type="button" value="/" id="divide" class="btn" />
        <input type="button" value="*" id="product" class="btn" />
        <input type="button" value="1" id="1" class="btn" />
        <input type="button" value="2" id="2" class="btn" />
        <input type="button" value="3" id="3" class="btn" />
        <input type="button" value="4" id="4" class="btn" />
        <input type="button" value="5" id="5" class="btn" />
        <input type="button" value="6" id="6" class="btn" />
        <input type="button" value="7" id="7" class="btn" />
        <input type="button" value="8" id="8" class="btn" />
        <input type="button" value="9" id="9" class="btn" />
        <input type="button" value="0" id="0" class="btn" />
        <input type="button" value="C" id="C" class="btn red-text" />
        <input type="button" value="=" id="equals" class="btn" />
    </form>
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script>
        $(document).ready(function (e) {
            //sự kiện nút 0-9 được bấm
            $('#1,#2,#3,#4,#5,#6,#7,#8,#9,#0').click(function () {
                var v = $(this).val();
                $('#answer').val($('#answer').val() + v);
            });
            //Sự kiện phím C bấm
            $('#C').click(function () {
                $('#answer').val('');
                $('#operation').val('');
                $('#operation').removeClass('activeAnswer');
                $('#equals').attr('onclick', '');
            });
            //sự kiện phím + được bấm
            $('#plus').click(function (e) {
                if ($('#answer').val() == '') {
                    return false;
                    $('#equals').attr('onclick', '');
                }
                else if ($('#operation').hasClass('activeAnswer')) {
                    $('#operation').val($('#operation').val() + '+');
                    $('#answer').val('');
                    $('#equals').attr('onclick', '');
                }
                else {
                    $('#operation').val($('#operation').val() + $('#answer').val() + '+');
                    $('#answer').val('');
                    $('#equals').attr('onclick', '');
                }
            });
            //sự kiện phím - được bấm
            $('#subtract').click(function (e) {

                if ($('#answer').val() == '') {
                    return false;
                    $('#equals').attr('onclick', '');
                }
                else if ($('#operation').hasClass('activeAnswer')) {
                    $('#operation').val($('#operation').val() + '-');
                    $('#answer').val('');
                    $('#equals').attr('onclick', '');
                }
                else {
                    $('#operation').val($('#operation').val() + $('#answer').val() + '-');
                    $('#answer').val('');
                    $('#equals').attr('onclick', '');
                }
            });
            //sự kiện phím / được bấm
            $('#divide').click(function (e) {

                if ($('#answer').val() == '') {
                    return false;
                    $('#equals').attr('onclick', '');
                }
                else if ($('#operation').hasClass('activeAnswer')) {
                    $('#operation').val($('#operation').val() + '/');
                    $('#answer').val('');
                    $('#equals').attr('onclick', '');
                }
                else {
                    $('#operation').val($('#operation').val() + $('#answer').val() + '/');
                    $('#answer').val('');
                    $('#equals').attr('onclick', '');
                }
            });
            //sự kiện phím * được bấm
            $('#product').click(function (e) {

                if ($('#answer').val() == '') {
                    return false;
                    $('#equals').attr('onclick', '');
                }
                else if ($('#operation').hasClass('activeAnswer')) {
                    $('#operation').val($('#operation').val() + '*');
                    $('#answer').val('');
                    $('#equals').attr('onclick', '');
                }
                else {
                    $('#operation').val($('#operation').val() + $('#answer').val() + '*');
                    $('#answer').val('');
                    $('#equals').attr('onclick', '');
                }
            });
            //sự kiện nút = được bấm
            $('#equals').click(function () {

                if ($('#equals').attr('onclick') != 'return false') {

                    var a = $('#answer').val();
                    var b = $('#operation').val();
                    var c = b.concat(a);
                    $('#answer').val(eval(c));
                    $('#operation').val(eval(c));
                    $('#operation').addClass('activeAnswer');
                    $('#equals').attr('onclick', 'return false');

                }
            });
        });
    </script>
</body>

</html>